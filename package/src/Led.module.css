.root {
  --led-size-xs: 8px;
  --led-size-sm: 12px;
  --led-size-md: 20px;
  --led-size-lg: 32px;
  --led-size-xl: 48px;

  display: inline-flex;
  align-items: center;
  gap: var(--mantine-spacing-xs);
  justify-content: var(--led-justify-content, flex-start);

  &[data-label-position='left'] {
    --led-label-order: 1;
    --led-led-order: 2;
  }

  &[data-label-position='right'] {
    --led-label-order: 2;
    --led-led-order: 1;
  }
}

.led {
  position: relative;
  width: var(--led-size);
  height: var(--led-size);
  border-radius: var(--led-radius);
  transition: all 0.3s ease;
  display: inline-block;
  order: var(--led-led-order, 1);

  /* Default off state - dimmed */
  background-color: color-mix(in srgb, var(--led-color) 20%, #000 80%);
  opacity: 0.4;

  /* Flat variant - simple LED */
  &[data-variant='flat'] {
    background-color: color-mix(in srgb, var(--led-color) 30%, #000 70%);

    &[data-value] {
      background-color: var(--led-color);
      opacity: var(--led-intensity);
      box-shadow:
        0 0 calc(var(--led-glow-size) * 0.3) color-mix(in srgb, var(--led-color) 60%, transparent),
        inset 0 1px 2px rgba(255, 255, 255, 0.3);
    }
  }

  /* 3D variant - realistic LED with depth */
  &[data-variant='3d'] {
    background: radial-gradient(circle at 30% 30%, color-mix(in srgb, var(--led-color) 40%, #000 60%), color-mix(in srgb, var(--led-color) 10%, #000 90%));
    box-shadow:
      inset 0 2px 4px rgba(0, 0, 0, 0.6),
      inset 0 -1px 2px rgba(0, 0, 0, 0.4),
      0 1px 2px rgba(0, 0, 0, 0.3);

    &[data-value] {
      background: radial-gradient(
        circle at 35% 35%,
        color-mix(in srgb, var(--led-color) 100%, #fff 20%),
        var(--led-color) 50%,
        color-mix(in srgb, var(--led-color) 70%, #000 30%)
      );
      opacity: 1;
      box-shadow:
        /* Outer glow */
        0 0 var(--led-glow-size) color-mix(in srgb, var(--led-color) calc(var(--led-intensity) * 100%), transparent),
        0 0 calc(var(--led-glow-size) * 0.5) color-mix(in srgb, var(--led-color) calc(var(--led-intensity) * 80%), transparent),
        /* Inner shadow for depth */ inset 0 1px 3px rgba(255, 255, 255, 0.5),
        inset 0 -2px 4px rgba(0, 0, 0, 0.3),
        /* Outer shadow */ 0 2px 4px rgba(0, 0, 0, 0.2);
    }
  }
}

.label {
  display: flex;
  order: var(--led-label-order, 2);
  font-size: var(--label-fz, var(--mantine-font-size-sm));
  line-height: var(--label-lh);
}

.glow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  height: 100%;
  border-radius: var(--led-radius);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;

  [data-value] & {
    opacity: calc(var(--led-intensity) * 0.6);
    background: radial-gradient(circle, color-mix(in srgb, var(--led-color) 40%, transparent) 0%, transparent 70%);
    filter: blur(calc(var(--led-size) * 0.3));
  }
}

.light {
  [data-variant='3d'][data-value] & {
    position: absolute;
    width: calc(var(--led-size) * 0.25);
    height: calc(var(--led-size) * 0.25);
    border-radius: 50%;
    top: 20%;
    left: 25%;
    transition: all 0.3s ease;
    pointer-events: none;

    background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.4) 60%, transparent 100%);
    filter: blur(1px);
    box-shadow: 0 0 calc(var(--led-size) * 0.1) rgba(255, 255, 255, 0.8);
  }
}

/* ============================================
   ANIMATIONS
   ============================================ */

/* Pulse - smooth continuous pulse */
[data-animate='pulse'] {
  animation: led-pulse var(--led-animation-duration) ease-in-out infinite;
}

@keyframes led-pulse {
  0%,
  100% {
    opacity: var(--led-intensity);
  }

  50% {
    opacity: calc(var(--led-intensity) * 0.5);
  }
}

/* Flash - quick bright flash */
[data-animate='flash'] {
  animation: led-flash var(--led-animation-duration) ease-in-out infinite;
}

@keyframes led-flash {
  0%,
  50%,
  100% {
    opacity: var(--led-intensity);
  }

  25% {
    opacity: 1;
    filter: brightness(1.3);
  }
}

/* Breathe - organic breathing effect */
[data-animate='breathe'] {
  animation: led-breathe var(--led-animation-duration) ease-in-out infinite;
}

@keyframes led-breathe {
  0%,
  100% {
    opacity: calc(var(--led-intensity) * 0.6);
    transform: scale(1);
  }

  50% {
    opacity: var(--led-intensity);
    transform: scale(1.05);
  }
}

/* Blink - on/off blinking */
[data-animate='blink'] {
  animation: led-blink var(--led-animation-duration) step-end infinite;
}

@keyframes led-blink {
  0%,
  50% {
    opacity: var(--led-intensity);
  }

  50.1%,
  100% {
    opacity: 0.2;
  }
}

/* Glow - intense glow pulse */
[data-animate='glow'] {
  animation: led-glow var(--led-animation-duration) ease-in-out infinite;
}

@keyframes led-glow {
  0%,
  100% {
    box-shadow:
      0 0 var(--led-glow-size) color-mix(in srgb, var(--led-color) calc(var(--led-intensity) * 70%), transparent),
      0 0 calc(var(--led-glow-size) * 0.5) color-mix(in srgb, var(--led-color) calc(var(--led-intensity) * 80%), transparent);
  }

  50% {
    box-shadow:
      0 0 calc(var(--led-glow-size) * 1.5) color-mix(in srgb, var(--led-color) 100%, transparent),
      0 0 var(--led-glow-size) color-mix(in srgb, var(--led-color) 100%, transparent),
      0 0 calc(var(--led-glow-size) * 0.3) var(--led-color);
  }
}
